{% load static %}
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plates of the World</title>
  <meta name="description" content="">
  <meta name="author" content="Raycaster Studio and Sam Lavigne">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
  <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css" rel="stylesheet" />
  <link rel="stylesheet" href="/static/style.css?v=1.0">
</head>

<body>
  {% if user.is_authenticated %}
    <script>window.admin=true;</script>
  {% endif %}

  <div id="app">
    <nav>
      <div class="nav-item" style="justify-content:left">
        <span>
          <router-link to="/info">INFO</router-link>
          <a style="margin-left: 20px;" href="https://goo.gl/forms/o5QySj1c28RiPDH02" target="blank">submit your own</a>
        </span>
      </div>
      <div class="nav-item">
        <router-link to="/plates" id="logo">Plates of the World</router-link>
      </div>

      <div class="nav-item">
        <div class="nav-icons" v-show="$route.path!='/'">
          <router-link class="icon" to="/plates"><img src="/static/list.png"><span>Grid</span></router-link>
          <router-link class="icon" to="/map"><img src="/static/map.png"><span>Map</span></router-link>
        </div>
      </div>
    </nav>
    <router-view></router-view>
  </div>

  <script type="text/template" id="welcome">
    <div class="welcome">
        <model-gltf
          :width="400"
          :height="400"
          @on-load="onLoad"
          @on-mousedown="toggleControl"
          :rotation="rotation"
          :lights="[{ type: 'AmbientLight', color: 0xaaaaaa }, { type: 'DirectionalLight', position: { x: 1, y: 1, z: 1 }, color: 0xffffff, intensity: 1.8 } ]"
          src="/static/plates/05_blue_potter_39_2.gltf"
        ></model-gltf>
      <p>This site is dedicated to the collectible plates produced to commemorate the 1939 and 1964 NY World's Fairs.</p>
      <p>Where are these plates today?</p>
      <p>
        <router-link class="explore" to="/plates">Explore the collection</router-link>
      </p>
    </div>
  </script>

  <script type="text/template" id="home">
    <div>
      <div class="plate-pagination">
        <a href="#" @click="goLeft"><img src="/static/left.png"></a>
        <a href="#" @click="goRight"><img src="/static/right.png"></a>
      </div>

      <div class="loading" v-if="loading">
        <p>loading...</p>
      </div>


      <div class="plate-container">
        <div v-for="plate in plates" class="plate">
          <router-link :to="{ name: 'plate-page', params: { id: plate.id }}">
            <video loop @mouseover="startHover" @mouseout="endHover" class="plate-video" :src="'/static/' + plate.image.replace('.png', '.mp4')"></video>
            <div class="listing" v-for="listing in plate.listings">
              <img v-tooltip="listing.title + ', ' + listing.location" class="listing-image" :src="thumbnail(listing)" :style="listStyle(listing)">
            </div>
          </router-link>
        </div>
        <br style="clear:both;">
      </div>
    </div>
  </script>

  <script type="text/template" id="map-page">
    <div>
      <div id="map-plate-holder">
        <a href="#" @click="viewAll">View All</a>
        <div class="paginate-up">
          <a href="#" @click="goUp"><img src="/static/up.png"></a>
        </div>
        <div class="map-plates">
          <div class="map-plate" @click="showPlate(plate.id)" href="#" v-for="plate in plates">
            <img :src="'/static/' + plate.image">
          </div>
        </div>
        <div class="paginate-down">
          <a href="#" @click="goDown"><img src="/static/down.png"></a>
        </div>
      </div>
      <div id="map-container" style=""></div>
    </div>
  </script>

  <script type="text/template" id="plate-page">
    <div class="plate-detail">
      <div class="plate-pagination">
      </div>
      <div class="plate-detail-header">
        <div class="plate-detail-paginate">
          <router-link :to="{ name: 'plate-page', params: { id: prevPlate }}"><img src="/static/left.png"></router-link>
        </div>
        <div class="plate-detail-header-content">
          <div>
            <model-gltf
              :width="400"
              :height="400"
              @on-load="onLoad"
              @on-mousedown="toggleControl"
              :rotation="rotation"
              :lights="[{ type: 'AmbientLight', color: 0xaaaaaa }, { type: 'DirectionalLight', position: { x: 1, y: 1, z: 1 }, color: 0xffffff, intensity: 1.8 } ]"
              :src="'/static/' + image.replace('.png', '.gltf')"
            ></model-gltf>
          </div>
          <div style="margin-left: 100px;">
            <h3>What the machine sees</h3>
            <p>${description}</p>
            <p v-if="admin"><a class="admin-link" :href="'/admin/plates/plate/' +id + '/change/'">Edit</a></p>
          </div>
        </div>
        <div class="plate-detail-paginate">
          <router-link :to="{ name: 'plate-page', params: { id: nextPlate }}"><img src="/static/right.png"></router-link>
        </div>
      </div>

      <div class="plate-detail-listings">
        <div class="plate-detail-listing" v-for="listing in listings">
          <div v-if="admin">
            <a :href="listing.listing_url">
              <img class="plate-detail-listing-image" :src="thumbnail(listing)">
            </a>
            <p>
              <a :href="listing.listing_url">
                ${ listing.location.replace(/,/g, ', ') }
                <img src="/static/external.svg">
              </a>
               <a :href="'/admin/plates/listing/' +listing.id + '/change/'" class="admin-link">edit</a>
            </p>
          </div>
          <a v-else :href="listing.listing_url" target="_blank">
            <img class="plate-detail-listing-image" :src="thumbnail(listing)">
            <p>
              ${ listing.location.replace(/,/g, ', ') }
              <img src="/static/external.svg">
            </p>
          </a>
        </div>
      </div>
    </div>
  </script>

  <script type="text/template" id="plate">
    <div>
      ${ $route.params.id}
    </div>
  </script>

  <script type="text/template" id="not-plates">
    <div>
      <div v-for="listing in listings">
        <img :src="thumbnail(listing.image)">
      </div>
    </div>
  </script>

  <script type="text/template" id="listing">
    <div>
      ${ $route.params.id}
    </div>
  </script>

  <script type="text/template" id="info">
    <div class="info-screen">
      <h2>Info about the project here</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
      <h2>Credits</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>

    </div>
  </script>

  <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
  <script src="/static/vue.js"></script>
  <script src="https://unpkg.com/sweet-scroll/sweet-scroll.min.js"></script>
  <script src="/static/vue-router.js"></script>
  <script src="/static/v-tooltip.min.js"></script>
  <script src="/static/vue-3d-model.min.js"></script>
  <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
